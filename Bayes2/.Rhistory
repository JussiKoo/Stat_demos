model {
y[1] ~ normal(0, 1);
y[2] ~ double_exponential(0, 2);
}
"
fit1 <- stan(model_code = scode, iter = 10, verbose = FALSE)
print(fit1)
mobilephonedata <- read.csv(mobile_phone_purcases.csv)
mobilephonedata <- read.csv(mobile_phone_purchases.csv)
mobilephonedata <- read.csv("mobile_phone_purchases.csv")
?read.csv
mobilephonedata <- read.csv("mobile_phone_purchases")
mobilephonedata <- read.csv("C:\kurssit\Tilastotiede\Bayes2\mobile_phone_purchases")
mobilephonedata <- read.csv("C:\\kurssit\\Tilastotiede\\Bayes2\\mobile_phone_purchases")
getwd()
setwd("C:/kurssit/Tilastotiede/Bayes2")
mobilephonedata <- read.csv("mobile_phone_purchases.csv")
View(mobilephonedata)
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';')
View(mobilephonedata)
library(tidyr)
library(dplyr)
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
) |>
mutate(
nyk_hankintavuodenaika = recode_factor(
factor(nyk_hankintavuodenaika),
"1" = "Talvi",
"2" = "Kevät",
"3" = "Kesä",
"4" = "Syksy"
)
)
View(mobilephonedata)
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
)
View(mobilephonedata)
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
View(mobilephonedata)
x <- if (rnorm(1, 0, 1) < 0) 1 else 0
x
x
mobilephonedata$nyk_min_hankintakuukausi <-
if (mobilephonedata$nyk_hankintakuukausi != 13)
mobilephonedata$nyk_hankintakuukausi - 1
mobilephonedata$testi <- ifelse(1>1, "joo", "ei")
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
min_kk <- function(x) {
if (x$nyk_hankintakuukausi != 13) return(x$nyk_hankintakuukausi-1)
}
mobilephonedata$nyk_min_hankintakuukausi <- min_kk(mobilephonedata$nyk_min_hankintakuukausi)
mobilephonedata$nyk_min_hankintakuukausi <- min_kk(mobilephonedata)
?rep
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
View(mobilephonedata)
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi-1
else if (mobilephonedata$nyk_hankintavuodenaika != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
warnings()
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3 - 1
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]+1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3 - 1
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]+1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- ((mobilephonedata$nyk_hankintavuodenaika[i]-1)-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]+1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]+1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
mobilephonedata$nyk_min_hankintavuosi <- rep(NA, nrow(mobilephonedata))
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
Matkapuhelin = Q41,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
2013-24
2013-24+18
2013-24+15
2013-34+15
i <- c(1,2,3,4,5,6)
2013-(14+(10*i))+15
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else if (mobilephonedata$ent_hankintavuosi[i] != 9999 && !is.na(mobilephonedata$ent_hankintavuosi[i]))
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$ent_hankintavuosi
else mobilephonedata$nyk_min_hankintavuosi[i] <- 2000 #TODO tätä voisi vielä säätää
}
mobilephonedata$nyk_max_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_max_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else mobilephonedata$nyk_max_hankintavuosi[i] <- 2013
}
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
#Vaikeat tapaukset: Jotkut ei osaa sanoa milloin nykyinen on ostettu eivätkä
#osaa sanoa milloin edellinen on ostettu. Minimi syntymävuoden alaraja?
#Yläraja?? Vai pudotetaanko nämä pois koska varmaan aika harvassa?
#Menettely:
#1: Jos vuosi ja kuukausi on ilmoitettu luotetaan niihin.
#2: Jos vuosi ja vuodenaika, mutta kuukautta ei ole
#ilmoitettu menettely kvartaalin mukaan.
#3 Jos vuotta ei ilmoitettu oletetaan, että henkilö on ostanut puhelimensa
#aikaisintaa 16 v. ikäisenä
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else if (mobilephonedata$ent_hankintavuosi[i] != 9999 && !is.na(mobilephonedata$ent_hankintavuosi[i]))
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$ent_hankintavuosi[i]
else mobilephonedata$nyk_min_hankintavuosi[i] <- 2000 #TODO tätä voisi vielä säätää
}
mobilephonedata$nyk_max_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_max_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else mobilephonedata$nyk_max_hankintavuosi[i] <- 2013
}
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else if (mobilephonedata$ent_hankintavuosi[i] != 9999 && !is.na(mobilephonedata$ent_hankintavuosi[i]))
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$ent_hankintavuosi[i]
else mobilephonedata$nyk_min_hankintavuosi[i] <- 2000 #TODO tätä voisi vielä säätää
}
mobilephonedata$nyk_max_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_max_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else mobilephonedata$nyk_max_hankintavuosi[i] <- 2012
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else if (mobilephonedata$ent_hankintavuosi[i] != 9999 && !is.na(mobilephonedata$ent_hankintavuosi[i]))
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$ent_hankintavuosi[i]
else mobilephonedata$nyk_min_hankintavuosi[i] <- 2000 #TODO tätä voisi vielä säätää
}
mobilephonedata$nyk_max_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_max_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else mobilephonedata$nyk_max_hankintavuosi[i] <- 2012
}
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
#Vaikeat tapaukset: Jotkut ei osaa sanoa milloin nykyinen on ostettu eivätkä
#osaa sanoa milloin edellinen on ostettu. Minimi syntymävuoden alaraja?
#Yläraja?? Vai pudotetaanko nämä pois koska varmaan aika harvassa?
#Menettely:
#1: Jos vuosi ja kuukausi on ilmoitettu luotetaan niihin.
#2: Jos vuosi ja vuodenaika, mutta kuukautta ei ole
#ilmoitettu menettely kvartaalin mukaan.
#3 Jos vuotta ei ilmoitettu oletetaan, että henkilö on ostanut puhelimensa
#aikaisintaa 16 v. ikäisenä
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else if (mobilephonedata$ent_hankintavuosi[i] != 9999 && !is.na(mobilephonedata$ent_hankintavuosi[i]))
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$ent_hankintavuosi[i]
else mobilephonedata$nyk_min_hankintavuosi[i] <- 2000 #TODO tätä voisi vielä säätää
}
mobilephonedata$nyk_max_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_max_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else mobilephonedata$nyk_max_hankintavuosi[i] <- 2012
}
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
#Vaikeat tapaukset: Jotkut ei osaa sanoa milloin nykyinen on ostettu eivätkä
#osaa sanoa milloin edellinen on ostettu. Minimi syntymävuoden alaraja?
#Yläraja?? Vai pudotetaanko nämä pois koska varmaan aika harvassa?
#Menettely:
#1: Jos vuosi ja kuukausi on ilmoitettu luotetaan niihin.
#2: Jos vuosi ja vuodenaika, mutta kuukautta ei ole
#ilmoitettu menettely kvartaalin mukaan.
#3 Jos vuotta ei ilmoitettu oletetaan, että henkilö on ostanut puhelimensa
#aikaisintaa 16 v. ikäisenä
mobilephonedata$nyk_min_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_min_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]-1
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_min_hankintakuukausi[i] <- (mobilephonedata$nyk_hankintavuodenaika[i]-1)*3
else
mobilephonedata$nyk_min_hankintakuukausi[i] <- 0
}
mobilephonedata$nyk_max_hankintakuukausi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintakuukausi[i] != 13)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintakuukausi[i]
else if (mobilephonedata$nyk_hankintavuodenaika[i] != 5)
mobilephonedata$nyk_max_hankintakuukausi[i] <- mobilephonedata$nyk_hankintavuodenaika[i]*3
else
mobilephonedata$nyk_max_hankintakuukausi[i] <- 12
}
mobilephonedata$nyk_min_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else if (mobilephonedata$ent_hankintavuosi[i] != 9999 && !is.na(mobilephonedata$ent_hankintavuosi[i]))
mobilephonedata$nyk_min_hankintavuosi[i] <- mobilephonedata$ent_hankintavuosi[i]
else mobilephonedata$nyk_min_hankintavuosi[i] <- 2000 #TODO tätä voisi vielä säätää
}
mobilephonedata$nyk_max_hankintavuosi <- rep(NA, nrow(mobilephonedata))
for (i in 1:nrow(mobilephonedata)) {
if (mobilephonedata$nyk_hankintavuosi[i] != 9999)
mobilephonedata$nyk_max_hankintavuosi[i] <- mobilephonedata$nyk_hankintavuosi[i]
else mobilephonedata$nyk_max_hankintavuosi[i] <- 2012
}
mobilephonedata <- read.csv("mobile_phone_purchases.csv", sep=';') |>
select(
Ika,
Sukup,
nyk_hankintavuosi = Q43,
nyk_hankintakuukausi = Q44,
nyk_hankintavuodenaika  = Q45,
ent_hankintavuosi = Q48,
ent_hankintakuukausi = Q49,
ent_hankintavuodenaika  = Q50,
)
View(mobilephonedata)
View(mod)
View(mobilephonedata)
View(mobilephonedata)
